{
  "test_info": {
    "server_url": "http://localhost:8001",
    "websocket_url": "ws://localhost:8000",
    "timestamp": "2025-06-19T10:15:55.949681",
    "total_tests": 22,
    "passed_tests": 20,
    "failed_tests": 2
  },
  "results": [
    {
      "name": "Root Endpoint",
      "success": true,
      "message": "Server running (2.063s)",
      "duration": 2.0628061294555664,
      "timestamp": "2025-06-19T10:15:50.106686",
      "response_data": {
        "message": "ESP32 Audio Streaming Server is running",
        "version": "1.0.0",
        "status": "healthy",
        "documentation": "/docs",
        "websocket_endpoint": "/ws/{device_id}",
        "features": [
          "ESP32 WebSocket connections",
          "OpenAI Realtime API integration",
          "User registration and management",
          "System prompt management",
          "Session tracking",
          "Security middleware",
          "Comprehensive logging"
        ]
      }
    },
    {
      "name": "Health Check",
      "success": true,
      "message": "Status: healthy (0.390s)",
      "duration": 0.39031267166137695,
      "timestamp": "2025-06-19T10:15:50.500005",
      "response_data": {
        "status": "healthy",
        "timestamp": "2025-06-19T10:15:50.112232",
        "services": {
          "firebase": "healthy",
          "websocket": {
            "status": "healthy",
            "active_connections": 0
          },
          "openai": {
            "status": "healthy",
            "active_connections": 0
          }
        }
      }
    },
    {
      "name": "Metrics Endpoint",
      "success": true,
      "message": "Metrics available (0.006s)",
      "duration": 0.0063190460205078125,
      "timestamp": "2025-06-19T10:15:50.506324",
      "response_data": {
        "metrics": {
          "request_count": 0,
          "error_count": 0,
          "total_process_time": 0.0,
          "request_counts_by_path": {},
          "error_counts_by_status": {},
          "response_times": []
        },
        "note": "Metrics are collected automatically and reset periodically"
      }
    },
    {
      "name": "API Documentation",
      "success": true,
      "message": "Docs accessible (0.005s)",
      "duration": 0.004991292953491211,
      "timestamp": "2025-06-19T10:15:50.516870",
      "response_data": null
    },
    {
      "name": "Valid Device ID: ABCD1234",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.523974",
      "response_data": null
    },
    {
      "name": "Valid Device ID: TEST0001",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.535611",
      "response_data": null
    },
    {
      "name": "Valid Device ID: USER9999",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.542770",
      "response_data": null
    },
    {
      "name": "Valid Device ID: DEMO5678",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.549915",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: abc1234",
      "success": true,
      "message": "Correctly rejected (0.006s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.555889",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ABCD123",
      "success": true,
      "message": "Correctly rejected (0.050s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.605907",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ABCD12345",
      "success": true,
      "message": "Correctly rejected (0.012s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.617474",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: 1234ABCD",
      "success": true,
      "message": "Correctly rejected (0.018s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.635126",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ",
      "success": true,
      "message": "Correctly rejected (0.012s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.646688",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: invalid",
      "success": true,
      "message": "Correctly rejected (0.008s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:50.654765",
      "response_data": null
    },
    {
      "name": "Register User: ABCD1234",
      "success": true,
      "message": "User already exists (expected) (1.131s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:51.785761",
      "response_data": null
    },
    {
      "name": "Register User: TEST0001",
      "success": true,
      "message": "User already exists (expected) (0.584s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:52.369863",
      "response_data": null
    },
    {
      "name": "Register User: USER9999",
      "success": true,
      "message": "User already exists (expected) (1.159s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:53.528542",
      "response_data": null
    },
    {
      "name": "Register User: DEMO5678",
      "success": true,
      "message": "User already exists (expected) (0.686s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:54.214688",
      "response_data": null
    },
    {
      "name": "Duplicate Registration Prevention",
      "success": true,
      "message": "Correctly prevented duplicate (1.001s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:55.216755",
      "response_data": null
    },
    {
      "name": "Invalid Registration Data",
      "success": true,
      "message": "Correctly rejected invalid data (0.006s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:55.222274",
      "response_data": null
    },
    {
      "name": "Verify User: ABCD1234",
      "success": false,
      "message": "User verification failed: {'registered': False, 'device_id': 'ABCD1234'}",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:55.938930",
      "response_data": null
    },
    {
      "name": "Verify User: TEST0001",
      "success": false,
      "message": "User verification failed: {'error': 'Not Found', 'message': 'The requested resource was not found', 'code': 'NOT_FOUND'}",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:15:55.946139",
      "response_data": null
    }
  ]
}