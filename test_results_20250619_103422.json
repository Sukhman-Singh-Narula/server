{
  "test_info": {
    "server_url": "http://localhost:8001",
    "websocket_url": "ws://localhost:8000",
    "timestamp": "2025-06-19T10:34:22.240321",
    "total_tests": 22,
    "passed_tests": 20,
    "failed_tests": 2
  },
  "results": [
    {
      "name": "Root Endpoint",
      "success": true,
      "message": "Server running (2.053s)",
      "duration": 2.0527663230895996,
      "timestamp": "2025-06-19T10:34:14.245145",
      "response_data": {
        "message": "ESP32 Audio Streaming Server is running",
        "version": "1.0.0",
        "status": "healthy",
        "documentation": "/docs",
        "websocket_endpoint": "/ws/{device_id}",
        "features": [
          "ESP32 WebSocket connections",
          "OpenAI Realtime API integration",
          "User registration and management",
          "System prompt management",
          "Session tracking",
          "Security middleware",
          "Comprehensive logging"
        ]
      }
    },
    {
      "name": "Health Check",
      "success": true,
      "message": "Status: healthy (1.417s)",
      "duration": 1.4173469543457031,
      "timestamp": "2025-06-19T10:34:15.662492",
      "response_data": {
        "status": "healthy",
        "timestamp": "2025-06-19T10:34:14.248148",
        "services": {
          "firebase": "healthy",
          "websocket": {
            "status": "healthy",
            "active_connections": 0
          },
          "openai": {
            "status": "healthy",
            "active_connections": 0
          }
        }
      }
    },
    {
      "name": "Metrics Endpoint",
      "success": true,
      "message": "Metrics available (0.007s)",
      "duration": 0.0070037841796875,
      "timestamp": "2025-06-19T10:34:15.669496",
      "response_data": {
        "metrics": {
          "request_count": 0,
          "error_count": 0,
          "total_process_time": 0.0,
          "request_counts_by_path": {},
          "error_counts_by_status": {},
          "response_times": []
        },
        "note": "Metrics are collected automatically and reset periodically"
      }
    },
    {
      "name": "API Documentation",
      "success": true,
      "message": "Docs accessible (0.004s)",
      "duration": 0.0040285587310791016,
      "timestamp": "2025-06-19T10:34:15.674042",
      "response_data": null
    },
    {
      "name": "Valid Device ID: ABCD1234",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.682121",
      "response_data": null
    },
    {
      "name": "Valid Device ID: TEST0001",
      "success": true,
      "message": "Validation passed (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.688634",
      "response_data": null
    },
    {
      "name": "Valid Device ID: USER9999",
      "success": true,
      "message": "Validation passed (0.005s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.694917",
      "response_data": null
    },
    {
      "name": "Valid Device ID: DEMO5678",
      "success": true,
      "message": "Validation passed (0.006s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.701457",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: abc1234",
      "success": true,
      "message": "Correctly rejected (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.708468",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ABCD123",
      "success": true,
      "message": "Correctly rejected (0.006s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.714894",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ABCD12345",
      "success": true,
      "message": "Correctly rejected (0.039s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.753615",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: 1234ABCD",
      "success": true,
      "message": "Correctly rejected (0.005s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.758617",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: ",
      "success": true,
      "message": "Correctly rejected (0.007s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.766147",
      "response_data": null
    },
    {
      "name": "Invalid Device ID: invalid",
      "success": true,
      "message": "Correctly rejected (0.006s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:15.771666",
      "response_data": null
    },
    {
      "name": "Register User: ABCD1234",
      "success": true,
      "message": "User already exists (expected) (1.221s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:16.993012",
      "response_data": null
    },
    {
      "name": "Register User: TEST0001",
      "success": true,
      "message": "User already exists (expected) (0.524s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:17.517437",
      "response_data": null
    },
    {
      "name": "Register User: USER9999",
      "success": true,
      "message": "User already exists (expected) (1.216s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:18.733913",
      "response_data": null
    },
    {
      "name": "Register User: DEMO5678",
      "success": true,
      "message": "User already exists (expected) (0.513s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:19.247413",
      "response_data": null
    },
    {
      "name": "Duplicate Registration Prevention",
      "success": true,
      "message": "Correctly prevented duplicate (1.228s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:20.476590",
      "response_data": null
    },
    {
      "name": "Invalid Registration Data",
      "success": true,
      "message": "Correctly rejected invalid data (0.009s)",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:20.485153",
      "response_data": null
    },
    {
      "name": "Verify User: ABCD1234",
      "success": false,
      "message": "User verification failed: {'registered': False, 'device_id': 'ABCD1234'}",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:20.897002",
      "response_data": null
    },
    {
      "name": "Verify User: TEST0001",
      "success": false,
      "message": "User verification failed: {'registered': False, 'device_id': 'TEST0001'}",
      "duration": 0.0,
      "timestamp": "2025-06-19T10:34:22.237820",
      "response_data": null
    }
  ]
}